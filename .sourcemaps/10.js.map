{"version":3,"sources":["../../src/pages/history/history.module.ts","../../src/pages/history/history.ts"],"names":[],"mappings":"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","file":"10.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { HistoryPage } from './history';\n\n@NgModule({\n  declarations: [\n    HistoryPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(HistoryPage),\n  ],\n})\nexport class HistoryPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/history/history.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, ModalController } from 'ionic-angular';\nimport { MarketServiceProvider } from '../../providers/market-service/market-service';\nimport { LoadingController } from 'ionic-angular';\nimport { PersonServiceProvider } from '../../providers/person-service/person-service';\n\n@IonicPage()\n@Component({\n    selector: 'page-history',\n    templateUrl: 'history.html',\n})\nexport class HistoryPage {\n    json: any;\n    credential = localStorage.getItem(\"credential_user\");\n    aux = JSON.parse(this.credential);\n    loader: any;\n\n    constructor(\n        public modalCtrl: ModalController,\n        public navCtrl: NavController,\n        public navParams: NavParams,\n        public personService: PersonServiceProvider,\n        public marketService: MarketServiceProvider,\n        public loadingCtrl: LoadingController) { }\n\n    ionViewDidLoad() {\n        this.presentLoading();\n        this.marketService.getHistory({ r: this.aux.data.IdDocument }).then((response) => {\n            if (response['data'] != false) {\n                let data = response['data'];\n\n                for (let i = 0; data.length > i; i++) {\n                    if (data[i]['Resolution'] == 'Cancelado por Sistema') {\n                        data[i]['Resolution'] = 'Cancelado por el sistema';\n                        data[i]['Class'] = 'card-header-cancel';\n                    } else if (data[i]['Resolution'] == 'Cancelado Agente') {\n                        data[i]['Resolution'] = 'Cancelado por el agente';\n                        data[i]['Class'] = 'card-header-cancel';\n                    } else if (data[i]['Resolution'] == 'Cancelado Member') {\n                        data[i]['Resolution'] = 'Cancelado por usuario';\n                        data[i]['Class'] = 'card-header-cancel';\n                    } else if (data[i]['Resolution'].includes('Completado')) {\n                        data[i]['Resolution'] = 'Completado con Ã©xito';\n                        data[i]['Class'] = 'card-header-acepta';\n                    }\n\n                    this.personService.getDataAgent({ r: data[i]['Agent'] }).then((info) => {\n                        data[i]['Nombre'] = info[\"data\"][\"Name\"] + ' ' + info[\"data\"][\"LastName\"]\n                    })\n\n                    data[i]['Total'] = this.formatNumber(parseInt(data[i]['Total']));\n                }\n\n                this.json = data;\n                this.loader.dismiss();\n\n            } else {\n                this.loader.dismiss();\n                this.json = null;\n            }\n        })\n    }\n\n    presentLoading() {\n        this.loader = this.loadingCtrl.create({\n            content: \"Cargando...\",\n            duration: 3000\n        });\n        this.loader.present();\n    }\n\n    openComentario(comentario){\n        let modal = this.modalCtrl.create('ModalComentarioPage', { c : comentario });\n        modal.present();\n    }\n\n    formatNumber(num) {\n        num = num.toString().split('').reverse().join('').replace(/(?=\\d*\\.?)(\\d{3})/g, '$1.');\n        num = num.split('').reverse().join('').replace(/^[\\.]/, '');\n        return num;\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/history/history.ts"],"sourceRoot":""}