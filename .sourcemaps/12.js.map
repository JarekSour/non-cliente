{"version":3,"sources":["../../src/pages/cart/cart.module.ts","../../src/pages/cart/cart.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAAyC;AACO;AACd;AAUlC;IAAA;IAA6B,CAAC;IAAjB,cAAc;QAR1B,uEAAQ,CAAC;YACR,YAAY,EAAE;gBACZ,uDAAQ;aACT;YACD,OAAO,EAAE;gBACP,sEAAe,CAAC,QAAQ,CAAC,uDAAQ,CAAC;aACnC;SACF,CAAC;OACW,cAAc,CAAG;IAAD,qBAAC;CAAA;AAAH;;;;;;;;;;;;;;;;;;;;;;;;ACZe;AACyD;AACb;AAC9B;AACiE;AACvE;AAOlD;IASI,kBACW,aAAoC,EACpC,SAA0B,EAC1B,SAA0B,EAC1B,KAAa,EACb,OAAsB,EACtB,WAA8B,EAC9B,WAAwB,EACvB,cAA8B,EAC/B,SAAoB;QARpB,kBAAa,GAAb,aAAa,CAAuB;QACpC,cAAS,GAAT,SAAS,CAAiB;QAC1B,cAAS,GAAT,SAAS,CAAiB;QAC1B,UAAK,GAAL,KAAK,CAAQ;QACb,YAAO,GAAP,OAAO,CAAe;QACtB,gBAAW,GAAX,WAAW,CAAmB;QAC9B,gBAAW,GAAX,WAAW,CAAa;QACvB,mBAAc,GAAd,cAAc,CAAgB;QAC/B,cAAS,GAAT,SAAS,CAAW;QAhB/B,eAAU,GAAG,YAAY,CAAC,OAAO,CAAC,iBAAiB,CAAC,CAAC;QACrD,mBAAc,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;QAC7C,SAAI,GAAG,EAAE,CAAC;QAEV,UAAK,GAAG,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,EAAE,KAAK,EAAE,CAAC;QAcxE,IAAI,MAAM,GAAG,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;QAC1C,IAAI,QAAQ,GAAG,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC;QAC9C,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;QACzC,IAAI,CAAC,KAAK,CAAC,CAAC,GAAG,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC;QAC/C,IAAI,CAAC,KAAK,CAAC,CAAC,GAAG,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,UAAU,CAAC;QACnD,IAAI,CAAC,KAAK,CAAC,CAAC,GAAG,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC,CAAC;QAEvD,GAAG,CAAC,CAAC,IAAI,MAAM,IAAI,MAAM,CAAC,CAAC,CAAC;YACxB,GAAG,CAAC,CAAc,UAAQ,EAAR,qBAAQ,EAAR,sBAAQ,EAAR,IAAQ;gBAArB,IAAI,KAAK;gBACV,EAAE,CAAC,CAAC,KAAK,CAAC,OAAO,IAAI,MAAM,IAAI,MAAM,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;oBAChD,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,OAAO,EAAE,KAAK,CAAC,OAAO,CAAC,EAAE,MAAM,EAAE,KAAK,CAAC,MAAM,CAAC,EAAE,OAAO,EAAE,KAAK,CAAC,OAAO,CAAC,EAAE,OAAO,EAAE,MAAM,CAAC,MAAM,CAAC,EAAE,MAAM,EAAE,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,OAAO,CAAC,EAAE,MAAM,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC;oBAC/K,IAAI,CAAC,KAAK,CAAC,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,GAAG,MAAM,CAAC,MAAM,CAAC,CAAC;oBAC7C,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,IAAI,CAAC,EAAE,UAAU,EAAE,MAAM,EAAE,UAAU,EAAE,MAAM,CAAC,MAAM,CAAC,EAAE,CAAC;gBACzE,CAAC;aACJ;QACL,CAAC;IACL,CAAC;IAED,kCAAe,GAAf;QAAA,iBAkEC;QAjEG,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,gBAAgB,EAAE,UAAC,KAAK,EAAE,IAAI;YAC/C,EAAE,CAAC,CAAC,YAAY,CAAC,OAAO,CAAC,UAAU,CAAC,KAAK,IAAI,CAAC,CAAC,CAAC;gBAC5C,YAAY,CAAC,UAAU,CAAC,UAAU,CAAC,CAAC;gBAEpC,KAAI,CAAC,KAAK,CAAC,CAAC,GAAG,IAAI,CAAC;gBACpB,KAAI,CAAC,cAAc,EAAE,CAAC;gBACtB,KAAI,CAAC,cAAc,CAAC,cAAc,CAAC,KAAK,CAAC;qBACpC,IAAI,CAAC,UAAC,WAAwC;oBAC3C,KAAI,CAAC,KAAK,CAAC,CAAC,GAAG,WAAW,CAAC,QAAQ,GAAG,KAAK,GAAG,WAAW,CAAC,SAAS,CAAC;oBAEpE,KAAI,CAAC,MAAM,CAAC,OAAO,EAAE,CAAC;oBACtB,IAAI,MAAM,GAAG,KAAI,CAAC,SAAS,CAAC,MAAM,CAAC;wBAC/B,qBAAqB,EAAE,KAAK;wBAC5B,KAAK,EAAE,qBAAqB;wBAC5B,OAAO,EAAE,8DAA8D,GAAG,KAAK,GAAG,uDAAuD;wBACzI,OAAO,EAAE;4BACL;gCACI,IAAI,EAAE,SAAS;gCACf,OAAO,EAAE;oCACL,KAAI,CAAC,cAAc,EAAE,CAAC;oCACtB,KAAI,CAAC,KAAK,CAAC,CAAC,GAAG,KAAK,CAAC;oCAErB,KAAI,CAAC,aAAa,CAAC,gBAAgB,CAAC,EAAE,CAAC,EAAE,KAAI,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,UAAC,IAAI;wCAC/D,KAAI,CAAC,KAAK,CAAC,EAAE,GAAG,IAAI,CAAC,MAAM,CAAC,CAAC,YAAY,CAAC,CAAC;wCAC3C,KAAI,CAAC,KAAK,CAAC,CAAC,GAAG,IAAI,CAAC;wCACpB,KAAI,CAAC,aAAa,CAAC,eAAe,CAAC,KAAI,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,UAAC,QAAQ;4CACzD,8BAA8B;4CAC9B,EAAE,CAAC,CAAC,QAAQ,CAAC,MAAM,CAAC,IAAI,KAAK,CAAC,CAAC,CAAC;gDAC5B,KAAI,CAAC,MAAM,CAAC,OAAO,EAAE,CAAC;gDACtB,IAAI,IAAI,GAAG,KAAI,CAAC,SAAS,CAAC,MAAM,CAAC;oDAC7B,qBAAqB,EAAE,KAAK;oDAC5B,KAAK,EAAE,gBAAgB;oDACvB,OAAO,EAAE,sCAAsC;oDAC/C,OAAO,EAAE,CAAC;4DACN,IAAI,EAAE,SAAS;4DACf,OAAO,EAAE;gEACL,KAAI,CAAC,OAAO,CAAC,OAAO,CAAC,UAAU,CAAC,CAAC;4DACrC,CAAC;yDACJ,CAAC;iDACL,CAAC,CAAC;gDACH,IAAI,CAAC,OAAO,EAAE,CAAC;4CACnB,CAAC;4CAAC,IAAI,CAAC,CAAC;gDACJ,YAAY,CAAC,OAAO,CAAC,cAAc,EAAE,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC;gDACvD,KAAI,CAAC,OAAO,CAAC,OAAO,CAAC,aAAa,EAAE,EAAE,SAAS,EAAE,KAAI,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC;4CACrE,CAAC;wCACL,CAAC,CAAC,CAAC;oCACP,CAAC,CAAC,CAAC;gCACP,CAAC;6BACJ;4BACD;gCACI,IAAI,EAAE,UAAU;gCAChB,OAAO,EAAE;gCAET,CAAC;6BACJ;yBACJ;qBACJ,CAAC,CAAC;oBACH,MAAM,CAAC,OAAO,EAAE,CAAC;gBAErB,CAAC,CAAC,CAAC,KAAK,CAAC,UAAC,KAAU;oBAChB,KAAI,CAAC,MAAM,CAAC,OAAO,EAAE,CAAC;oBACtB,KAAI,CAAC,YAAY,CAAC,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC,CAAC;gBAC7C,CAAC,CAAC,CAAC;YACX,CAAC;QACL,CAAC,CAAC,CAAC;IACP,CAAC;IAED,iCAAc,GAAd;QAAA,iBAkFC;QAjFG,IAAI,MAAM,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC;YAC/B,qBAAqB,EAAE,KAAK;YAC5B,KAAK,EAAE,4BAA4B;YACnC,OAAO,EAAE,EAAE;YACX,OAAO,EAAE;gBACL;oBACI,IAAI,EAAE,sBAAsB;oBAC5B,OAAO,EAAE;wBACL,KAAI,CAAC,WAAW,CAAC,kBAAkB,EAAE,CAAC,IAAI,CAAC,UAAC,IAAI;4BAC5C,KAAI,CAAC,KAAK,CAAC,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,QAAQ,GAAG,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,SAAS;4BAEnE,KAAI,CAAC,cAAc,CAAC,cAAc,CAAC,IAAI,CAAC,MAAM,CAAC,QAAQ,EAAE,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC,IAAI,CAAC,UAAC,MAAmC;gCAErH,KAAI,CAAC,OAAO,CAAC,IAAI,CAAC,cAAc,EAAE;oCAC9B,QAAQ,EAAE,MAAM,CAAC,cAAc,CAAC,GAAG,GAAG,GAAG,MAAM,CAAC,iBAAiB,CAAC,GAAG,IAAI,GAAG,MAAM,CAAC,UAAU,CAAC;oCAC9F,KAAK,EAAE,KAAI,CAAC,KAAK,CAAC,CAAC;iCACtB,CAAC,CAAC;4BAEP,CAAC,CAAC,CAAC,KAAK,CAAC,UAAC,KAAU;gCAChB,KAAI,CAAC,YAAY,CAAC,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC,CAAC;4BAC7C,CAAC,CAAC,CAAC;wBACP,CAAC,CAAC,CAAC;oBACP,CAAC;iBACJ;gBACD;oBACI,IAAI,EAAE,kBAAkB;oBACxB,OAAO,EAAE;wBACL,IAAI,KAAK,GAAG,KAAI,CAAC,SAAS,CAAC,MAAM,CAAC;4BAC9B,qBAAqB,EAAE,KAAK;4BAC5B,KAAK,EAAE,EAAE;4BACT,OAAO,EAAE,qDAAqD;4BAC9D,OAAO,EAAE;gCACL;oCACI,IAAI,EAAE,SAAS;oCACf,OAAO,EAAE;wCACL,KAAI,CAAC,WAAW,CAAC,kBAAkB,EAAE,CAAC,IAAI,CAAC,UAAC,IAAI;4CAC5C,KAAI,CAAC,KAAK,CAAC,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,QAAQ,GAAG,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,SAAS;4CAEnE,KAAI,CAAC,aAAa,CAAC,gBAAgB,CAAC,EAAE,CAAC,EAAE,KAAI,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,UAAC,IAAI;gDAC/D,KAAI,CAAC,KAAK,CAAC,EAAE,GAAG,IAAI,CAAC,MAAM,CAAC,CAAC,YAAY,CAAC,CAAC;gDAC3C,KAAI,CAAC,KAAK,CAAC,CAAC,GAAG,KAAK,CAAC;gDACrB,KAAI,CAAC,aAAa,CAAC,eAAe,CAAC,KAAI,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,UAAC,QAAQ;oDACzD,8BAA8B;oDAC9B,EAAE,CAAC,CAAC,QAAQ,CAAC,MAAM,CAAC,IAAI,KAAK,CAAC,CAAC,CAAC;wDAC5B,KAAI,CAAC,MAAM,CAAC,OAAO,EAAE,CAAC;wDACtB,IAAI,IAAI,GAAG,KAAI,CAAC,SAAS,CAAC,MAAM,CAAC;4DAC7B,qBAAqB,EAAE,KAAK;4DAC5B,KAAK,EAAE,gBAAgB;4DACvB,OAAO,EAAE,sCAAsC;4DAC/C,OAAO,EAAE,CAAC;oEACN,IAAI,EAAE,SAAS;oEACf,OAAO,EAAE;wEACL,KAAI,CAAC,OAAO,CAAC,OAAO,CAAC,UAAU,CAAC,CAAC;oEACrC,CAAC;iEACJ,CAAC;yDACL,CAAC,CAAC;wDACH,IAAI,CAAC,OAAO,EAAE,CAAC;oDACnB,CAAC;oDAAC,IAAI,CAAC,CAAC;wDACJ,YAAY,CAAC,OAAO,CAAC,cAAc,EAAE,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC;wDACvD,KAAI,CAAC,OAAO,CAAC,OAAO,CAAC,aAAa,EAAE,EAAE,SAAS,EAAE,KAAI,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC;oDACrE,CAAC;gDACL,CAAC,CAAC,CAAC;4CACP,CAAC,CAAC,CAAC;wCACP,CAAC,CAAC,CAAC;oCACP,CAAC;iCACJ;gCACD;oCACI,IAAI,EAAE,UAAU;oCAChB,OAAO,EAAE;oCAET,CAAC;iCACJ;6BACJ;yBACJ,CAAC,CAAC;wBACH,KAAK,CAAC,OAAO,EAAE,CAAC;oBACpB,CAAC;iBACJ;aACJ;SACJ,CAAC,CAAC;QACH,MAAM,CAAC,OAAO,EAAE,CAAC;IAErB,CAAC;IAED,+BAAY,GAAZ,UAAa,GAAG;QACZ,IAAI,KAAK,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC;YAC9B,OAAO,EAAE,GAAG;YACZ,QAAQ,EAAE,IAAI;YACd,QAAQ,EAAE,QAAQ;SACrB,CAAC,CAAC;QAEH,KAAK,CAAC,OAAO,EAAE,CAAC;IACpB,CAAC;IAED,iCAAc,GAAd;QACI,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC;YAClC,OAAO,EAAE,aAAa;YACtB,QAAQ,EAAE,IAAI;YACd,qBAAqB,EAAE,KAAK;SAC/B,CAAC,CAAC;QACH,IAAI,CAAC,MAAM,CAAC,OAAO,EAAE,CAAC;IAC1B,CAAC;IAED,8BAAW,GAAX,UAAY,MAAM,EAAE,QAAQ;QACxB,IAAI,KAAK,GAAG,QAAQ,CAAC,MAAM,CAAC,OAAO,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC;QAC/C,MAAM,CAAC,IAAI,CAAC,YAAY,CAAC,QAAQ,GAAG,KAAK,CAAC,CAAC;IAC/C,CAAC;IAED,+BAAY,GAAZ,UAAa,GAAG;QACZ,GAAG,GAAG,GAAG,CAAC,QAAQ,EAAE,CAAC,KAAK,CAAC,EAAE,CAAC,CAAC,OAAO,EAAE,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,OAAO,CAAC,oBAAoB,EAAE,KAAK,CAAC,CAAC;QACvF,GAAG,GAAG,GAAG,CAAC,KAAK,CAAC,EAAE,CAAC,CAAC,OAAO,EAAE,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,OAAO,CAAC,OAAO,EAAE,EAAE,CAAC,CAAC;QAC5D,MAAM,CAAC,GAAG,CAAC;IACf,CAAC;IA1NQ,QAAQ;QAJpB,wEAAS,CAAC;YACP,QAAQ,EAAE,WAAW;WACG;SAC3B,CAAC;mFAWiD;YACzB,sEAAe;YACf,8DAAe;YACnB,oEAAM;YACJ,wEAAa;YACT,+EAAiB;YACjB,qFAAW;YACP,kEAAc;YACpB,KAAS;OAlBtB,QAAQ,CA4NpB;IAAD,CAAC;AAAA;SA5NY,QAAQ,e","file":"12.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { CartPage } from './cart';\n\n@NgModule({\n  declarations: [\n    CartPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(CartPage),\n  ],\n})\nexport class CartPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/cart/cart.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, AlertController, ToastController, Events } from 'ionic-angular';\nimport { MarketServiceProvider } from '../../providers/market-service/market-service';\nimport { Geolocation } from '@ionic-native/geolocation';\nimport { NativeGeocoder, NativeGeocoderReverseResult, NativeGeocoderForwardResult } from '@ionic-native/native-geocoder';\nimport { LoadingController } from 'ionic-angular';\n\n@IonicPage()\n@Component({\n    selector: 'page-cart',\n    templateUrl: 'cart.html',\n})\nexport class CartPage {\n\n    credential = localStorage.getItem(\"credential_user\");\n    credentialJson = JSON.parse(this.credential);\n    json = [];\n    total: any;\n    order = { r: '', m: '', g: '', a: '', p: [], q: 0, t: 0, pi: '', d: false };\n    loader: any;\n\n    constructor(\n        public marketService: MarketServiceProvider,\n        public alertCtrl: AlertController,\n        public toastCtrl: ToastController,\n        public event: Events,\n        public navCtrl: NavController,\n        public loadingCtrl: LoadingController,\n        public geolocation: Geolocation,\n        private nativeGeocoder: NativeGeocoder,\n        public navParams: NavParams) {\n\n        let codigo = this.navParams.get('codigo');\n        let producto = this.navParams.get('producto');\n        this.total = this.navParams.get('total');\n        this.order.r = this.navParams.get('rutAgente');\n        this.order.m = this.credentialJson.data.IdDocument;\n        this.order.t = parseInt(this.total.replace(/\\./g, ''));\n\n        for (let compra in codigo) {\n            for (let lista of producto) {\n                if (lista.Product == compra && codigo[compra] > 0) {\n                    this.json.push({ 'brand': lista['Brand'], 'name': lista['Name'], 'prize': lista['Price'], 'count': codigo[compra], 'suma': this.sumarString(lista['Price'], codigo[compra]) });\n                    this.order.q = this.order.q + codigo[compra];\n                    this.order.p.push({ 'producto': compra, 'cantidad': codigo[compra] })\n                }\n            }\n        }\n    }\n\n    ionViewDidEnter() {\n        this.event.subscribe('reloadLocation', (locat, orde) => {\n            if (localStorage.getItem('location') !== null) {\n                localStorage.removeItem('location');\n\n                this.order.p = orde;\n                this.presentLoading();\n                this.nativeGeocoder.forwardGeocode(locat)\n                    .then((coordinates: NativeGeocoderForwardResult) => {\n                        this.order.g = coordinates.latitude + ' , ' + coordinates.longitude;\n\n                        this.loader.dismiss();\n                        let prompt = this.alertCtrl.create({\n                            enableBackdropDismiss: false,\n                            title: 'Confirmar dirección',\n                            message: \"Verifica si la dirección de entrega es la correcta :<br><br>\" + locat + '<br><br>¿Estás seguro que deseas completar el pedido?',\n                            buttons: [\n                                {\n                                    text: 'Aceptar',\n                                    handler: () => {\n                                        this.presentLoading();\n                                        this.order.a = locat;\n\n                                        this.marketService.getPlayerIdAgent({ r: this.order.r }).then((data) => {\n                                            this.order.pi = data['data']['Player_ids'];\n                                            this.order.d = true;\n                                            this.marketService.confirmarCompra(this.order).then((response) => {\n                                                //if si tienda esta disponible\n                                                if (response['data'] == false) {\n                                                    this.loader.dismiss();\n                                                    let prom = this.alertCtrl.create({\n                                                        enableBackdropDismiss: false,\n                                                        title: 'Lo sentimos...',\n                                                        message: 'La tienda del agente fue desactivada',\n                                                        buttons: [{\n                                                            text: 'Aceptar',\n                                                            handler: () => {\n                                                                this.navCtrl.setRoot('HomePage');\n                                                            }\n                                                        }]\n                                                    });\n                                                    prom.present();\n                                                } else {\n                                                    localStorage.setItem('orderId_user', response['data']);\n                                                    this.navCtrl.setRoot('LoadingPage', { rutAgente: this.order.r });\n                                                }\n                                            });\n                                        });\n                                    }\n                                },\n                                {\n                                    text: 'Cancelar',\n                                    handler: () => {\n\n                                    }\n                                }\n                            ]\n                        });\n                        prompt.present();\n\n                    }).catch((error: any) => {\n                        this.loader.dismiss();\n                        this.presentToast(JSON.stringify(error));\n                    });\n            }\n        });\n    }\n\n    completePedido() {\n        let prompt = this.alertCtrl.create({\n            enableBackdropDismiss: false,\n            title: 'Escoge la forma de entrega',\n            message: \"\",\n            buttons: [\n                {\n                    text: 'Despacho a domicilio',\n                    handler: () => {\n                        this.geolocation.getCurrentPosition().then((resp) => {\n                            this.order.g = resp.coords.latitude + ' , ' + resp.coords.longitude\n\n                            this.nativeGeocoder.reverseGeocode(resp.coords.latitude, resp.coords.longitude).then((result: NativeGeocoderReverseResult) => {\n\n                                this.navCtrl.push('LocationPage', {\n                                    variable: result['thoroughfare'] + ' ' + result['subThoroughfare'] + ', ' + result['locality'],\n                                    order: this.order.p\n                                });\n\n                            }).catch((error: any) => {\n                                this.presentToast(JSON.stringify(error));\n                            });\n                        });\n                    }\n                },\n                {\n                    text: 'Retirar en local',\n                    handler: () => {\n                        let alert = this.alertCtrl.create({\n                            enableBackdropDismiss: false,\n                            title: '',\n                            message: \"Estas a punto de finalizar tu pedido, estas seguro?\",\n                            buttons: [\n                                {\n                                    text: 'Aceptar',\n                                    handler: () => {\n                                        this.geolocation.getCurrentPosition().then((resp) => {\n                                            this.order.g = resp.coords.latitude + ' , ' + resp.coords.longitude\n\n                                            this.marketService.getPlayerIdAgent({ r: this.order.r }).then((data) => {\n                                                this.order.pi = data['data']['Player_ids'];\n                                                this.order.d = false;\n                                                this.marketService.confirmarCompra(this.order).then((response) => {\n                                                    //if si tienda esta disponible\n                                                    if (response['data'] == false) {\n                                                        this.loader.dismiss();\n                                                        let prom = this.alertCtrl.create({\n                                                            enableBackdropDismiss: false,\n                                                            title: 'Lo sentimos...',\n                                                            message: 'La tienda del agente fue desactivada',\n                                                            buttons: [{\n                                                                text: 'Aceptar',\n                                                                handler: () => {\n                                                                    this.navCtrl.setRoot('HomePage');\n                                                                }\n                                                            }]\n                                                        });\n                                                        prom.present();\n                                                    } else {\n                                                        localStorage.setItem('orderId_user', response['data']);\n                                                        this.navCtrl.setRoot('LoadingPage', { rutAgente: this.order.r });\n                                                    }\n                                                });\n                                            });\n                                        });\n                                    }\n                                },\n                                {\n                                    text: 'Cancelar',\n                                    handler: () => {\n\n                                    }\n                                }\n                            ]\n                        });\n                        alert.present();\n                    }\n                }\n            ]\n        });\n        prompt.present();\n\n    }\n\n    presentToast(msg) {\n        let toast = this.toastCtrl.create({\n            message: msg,\n            duration: 3000,\n            position: 'bottom',\n        });\n\n        toast.present();\n    }\n\n    presentLoading() {\n        this.loader = this.loadingCtrl.create({\n            content: \"Cargando...\",\n            duration: 3000,\n            enableBackdropDismiss: false\n        });\n        this.loader.present();\n    }\n\n    sumarString(precio, cantidad) {\n        let price = parseInt(precio.replace(/\\./g, ''))\n        return this.formatNumber(cantidad * price);\n    }\n\n    formatNumber(num) {\n        num = num.toString().split('').reverse().join('').replace(/(?=\\d*\\.?)(\\d{3})/g, '$1.');\n        num = num.split('').reverse().join('').replace(/^[\\.]/, '');\n        return num;\n    }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/cart/cart.ts"],"sourceRoot":""}