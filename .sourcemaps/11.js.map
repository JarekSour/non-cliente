{"version":3,"sources":["../../src/pages/edit-profile/edit-profile.module.ts","../../src/pages/edit-profile/edit-profile.ts"],"names":[],"mappings":"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","file":"11.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { EditProfilePage } from './edit-profile';\n\n@NgModule({\n  declarations: [\n    EditProfilePage,\n  ],\n  imports: [\n    IonicPageModule.forChild(EditProfilePage),\n  ],\n})\nexport class EditProfilePageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/edit-profile/edit-profile.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, Events, ToastController,  } from 'ionic-angular';\nimport { PersonServiceProvider } from '../../providers/person-service/person-service';\nimport { AuthServiceProvider } from '../../providers/auth-service/auth-service';\n\n@IonicPage()\n@Component({\n    selector: 'page-edit-profile',\n    templateUrl: 'edit-profile.html',\n})\nexport class EditProfilePage {\n    credential = localStorage.getItem(\"credential_user\");\n    pass = localStorage.getItem(\"pass_user\");\n    aux = JSON.parse(this.credential);\n    toUpdate = {\n        n: this.aux.data.Name,\n        l: this.aux.data.LastName,\n        r: this.aux.data.IdDocument,\n        e: this.aux.data.Email,\n        p: this.pass,\n        t: this.aux.data.Phone\n    };\n    product = { x: '', xx: '', xxx: '' };\n    isNameorLast: boolean;\n    isCorreo: boolean;\n    isTelefono: boolean;\n    isPass: boolean;\n    inputText: any;\n    inputText2: any;\n    inputText3: any;\n\n    constructor(\n        public navCtrl: NavController,\n        public navParams: NavParams,\n        private toastCtrl: ToastController,\n        public personService: PersonServiceProvider,\n        public authService: AuthServiceProvider,\n        public event: Events) { }\n\n    ionViewDidLoad() {\n        let variable = this.navParams.get('variable');\n        switch (variable) {\n            case 'nombre':\n                this.inputText = 'Nombre'\n                this.isNameorLast = true;\n                this.product.x = this.aux.data.Name\n                break;\n            case 'apellido':\n                this.inputText = 'Apellido'\n                this.isNameorLast = true;\n                this.product.x = this.aux.data.LastName\n                break;\n            case 'correo':\n                this.inputText = 'Correo electrónico'\n                this.isCorreo = true;\n                this.product.x = this.aux.data.Email\n                break;\n            case 'telefono':\n                this.inputText = 'Teléfono'\n                this.isTelefono = true;\n                this.product.x = this.aux.data.Phone\n                break;\n            case 'pass':\n                this.inputText = 'Ingrese su contraseña actual';\n                this.inputText2 = 'Ingrese su nueva contraseña';\n                this.inputText3 = 'Reingrese su nueva contraseña';\n                this.isPass = true;\n                break;\n        }\n    }\n\n    editProfile() {\n        let variable = this.navParams.get('variable');\n        switch (variable) {\n            case 'nombre':\n                if (this.product.x.length > 2) {\n                    this.toUpdate.n = this.product.x\n                    this.personService.updateProfile(this.toUpdate).then((res) => {\n                        this.updateProfileLocalStorage(this.toUpdate.e);\n                    }, (err) => {\n                        this.presentToast('Ups! ocurrio un error');\n                    });\n                } else {\n                    this.presentToast('El nombre debe contener al menos 3 letras');\n                }\n                break;\n            case 'apellido':\n                if (this.product.x.length > 2) {\n                    this.toUpdate.l = this.product.x\n                    this.personService.updateProfile(this.toUpdate).then((res) => {\n                        this.updateProfileLocalStorage(this.toUpdate.e);\n                    }, (err) => {\n                        this.presentToast('Ups! ocurrio un error');\n                    });\n                } else {\n                    this.presentToast('El apellido debe contener al menos 3 letras');\n                }\n                break;\n            case 'correo':\n                if (this.validateEmail(this.product.x)) {\n                    this.toUpdate.e = this.product.x\n                    this.personService.updateProfile(this.toUpdate).then((res) => {\n                        this.updateProfileLocalStorage(this.toUpdate.e);\n                    }, (err) => {\n                        this.presentToast('Ups! ocurrio un error');\n                    });\n                } else {\n                    this.presentToast('El correo electrónico ingresado no es válido');\n                }\n                break;\n            case 'telefono':\n                if (this.product.x.length > 7) {\n                    this.toUpdate.t = this.product.x\n                    this.personService.updateProfile(this.toUpdate).then((res) => {\n                        this.updateProfileLocalStorage(this.toUpdate.e);\n                    }, (err) => {\n                        this.presentToast('Ups! ocurrio un error');\n                    });\n                } else {\n                    this.presentToast('El teléfono debe contener al menos 8 números');\n                }\n                break;\n            case 'pass':\n                if (this.pass != this.product.x) {\n                    this.presentToast('Tu actual contraseña es incorrecta');\n                } else {\n                    if (this.product.xx != this.product.xxx) {\n                        this.presentToast('Las nuevas contraseñas deben coincidir');\n                    } else {\n                        if (this.product.xx.length < 5) {\n                            this.presentToast('Tu nueva contraseña debe contener al menos 5 caracteres');\n                        } else {\n                            this.toUpdate.p = this.product.xx;\n                            this.personService.updateProfile(this.toUpdate).then((res) => {\n                                localStorage.setItem('pass_user', this.toUpdate.p);\n                                this.navCtrl.pop();\n                            }, (err) => {\n                                this.presentToast('Ups! ocurrio un error');\n                            });\n                        }\n                    }\n\n                }\n                break;\n        }\n    }\n\n    updateProfileLocalStorage(email) {\n        this.authService.login({ e: email, p: localStorage.getItem('pass_user')}).then((result) => {\n            if (result['message'] == 'Authorize') {\n                localStorage.setItem('credential_user', JSON.stringify(result));\n            }\n\n            this.event.publish('reloadProfile');\n            this.navCtrl.pop();\n        });\n    }\n\n    presentToast(msg) {\n        let toast = this.toastCtrl.create({\n            message: msg,\n            duration: 3000,\n            position: 'bottom',\n            dismissOnPageChange: true\n        });\n\n        toast.present();\n    }\n\n    validateEmail(email) {\n        var re = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n        return re.test(email);\n    }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/edit-profile/edit-profile.ts"],"sourceRoot":""}