{"version":3,"sources":["../../src/pages/loading/loading.module.ts","../../src/pages/loading/loading.ts"],"names":[],"mappings":"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","file":"9.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { LoadingPage } from './loading';\n\n@NgModule({\n  declarations: [\n    LoadingPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(LoadingPage),\n  ],\n})\nexport class LoadingPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/loading/loading.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, AlertController, ToastController, MenuController } from 'ionic-angular';\nimport { MarketServiceProvider } from '../../providers/market-service/market-service';\nimport { OneSignal } from '@ionic-native/onesignal';\n\n@IonicPage()\n@Component({\n    selector: 'page-loading',\n    templateUrl: 'loading.html',\n})\nexport class LoadingPage {\n\n    orderId: any;\n    rutAgente: any;\n    timeout: any;\n\n    constructor(\n        public navCtrl: NavController,\n        public marketService: MarketServiceProvider,\n        public alertCtrl: AlertController,\n        private _OneSignal: OneSignal,\n        public menuCtrl: MenuController,\n        public toastCtrl: ToastController,\n        public navParams: NavParams) { }\n\n    ionViewDidLoad() {\n        this.menuCtrl.enable(false, 'menuSlide');\n        this.orderId = localStorage.getItem('orderId_user');\n        this.rutAgente = this.navParams.get('rutAgente');\n\n        this.timeout = setTimeout(() => {\n            this.marketService.getOrdenDeCompra({ i: this.orderId }).then((res) => {\n                if (res['data'][\"State\"] == true)\n                    if (res['data'][\"Deal\"] == false) {\n                        localStorage.removeItem('g');\n                        localStorage.removeItem('orderId_user');\n                        localStorage.removeItem('en_camino_user');\n\n                        this._OneSignal.getIds().then((ids) => {\n                            this.marketService.cancelarCompraSystem({ i: this.orderId, rs: 'Cancelado por Sistema', pi: ids['userId'] }).then((data) => {\n                                this.navCtrl.setRoot('HomePage');\n                            });\n                        });\n                    }\n            });\n        }, 60000);\n    }\n\n\n    cancelRequest() {\n\n        let confirm = this.alertCtrl.create({\n            title: 'Alerta',\n            message: 'Â¿Estas seguro que deseas cancelar el pedido?',\n            enableBackdropDismiss: false,\n            buttons: [\n                {\n                    text: 'Aceptar',\n                    handler: () => {\n                        clearTimeout(this.timeout);\n                        this.marketService.getPlayerIdAgent({ r: this.rutAgente }).then((data) => {\n                            this.marketService.cancelarCompra({ i: this.orderId, rs: 'Cancelado Member', pi: data['data']['Player_ids'] }).then((res) => {\n                                if (res['data'] == true) {\n                                    localStorage.removeItem('g');\n                                    localStorage.removeItem('orderId_user');\n                                    localStorage.removeItem('en_camino_user');\n                                    let alert = this.alertCtrl.create({\n                                        title: 'Alerta',\n                                        subTitle: 'Tu pedido fue cancelado exitosamente',\n                                        enableBackdropDismiss: false,\n                                        buttons: [\n                                            {\n                                                text: 'Aceptar',\n                                                handler: data => {\n                                                    this.navCtrl.setRoot('HomePage');\n                                                }\n                                            }\n                                        ]\n                                    });\n                                    alert.present();\n                                } else {\n                                    this.presentToast('Ups! ocurrio un error');\n                                }\n                            })\n                        });\n                    }\n                },\n                {\n                    text: 'Cancelar',\n                    handler: () => { }\n                }\n            ]\n        });\n        confirm.present();\n    }\n\n    presentToast(msg) {\n        let toast = this.toastCtrl.create({\n            message: msg,\n            duration: 3000,\n            position: 'bottom',\n        });\n\n        toast.present();\n    }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/loading/loading.ts"],"sourceRoot":""}